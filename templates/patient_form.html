{% extends "base.html" %}

{% block title %}{% if patient %}Edit Patient{% else %}Add Patient{% endif %}{% endblock %}
{% block page_title %}{% if patient %}Edit Patient{% else %}Add Patient{% endif %}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <form method="POST">
            <div class="form-section">
                <h3>Patient Information</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">First Name</label>
                        <input type="text" name="first_name" class="form-control" required 
                               value="{{ patient.first_name if patient else '' }}">
                    </div>
                    <div class="form-group">
                        <label class="required">Last Name</label>
                        <input type="text" name="last_name" class="form-control" required 
                               value="{{ patient.last_name if patient else '' }}">
                    </div>
                    <div class="form-group">
                        <label class="required">Date of Birth</label>
                        <input type="date" name="date_of_birth" class="form-control" required 
                               value="{{ patient.date_of_birth.strftime('%Y-%m-%d') if patient else '' }}">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>MRN / Patient ID</label>
                        <input type="text" name="mrn" class="form-control" 
                               value="{{ patient.mrn if patient else '' }}" placeholder="Medical Record Number">
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" name="phone" class="form-control" 
                               value="{{ patient.phone if patient else '' }}" placeholder="(555) 555-5555">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" class="form-control" 
                               value="{{ patient.email if patient else '' }}" placeholder="patient@email.com">
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3>Address</h3>
                <div class="form-group">
                    <label>Street Address</label>
                    <input type="text" name="address" class="form-control" 
                           value="{{ patient.address if patient else '' }}" placeholder="123 Main Street">
                </div>
                <div class="form-row">
                    <div class="form-group" style="flex:2;">
                        <label>City</label>
                        <input type="text" name="city" class="form-control" 
                               value="{{ patient.city if patient else '' }}">
                    </div>
                    <div class="form-group">
                        <label>State</label>
                        <input type="text" name="state" class="form-control" maxlength="2" 
                               value="{{ patient.state if patient else '' }}" placeholder="NC">
                    </div>
                    <div class="form-group">
                        <label>ZIP Code</label>
                        <input type="text" name="zip_code" class="form-control" 
                               value="{{ patient.zip_code if patient else '' }}" placeholder="28043">
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3>Insurance</h3>
                <div class="form-group">
                    <label>Insurance ID / Member Number</label>
                    <input type="text" name="insurance_id" class="form-control" 
                           value="{{ patient.insurance_id if patient else '' }}">
                </div>
            </div>
            
            <div class="form-section">
                <h3>Notes</h3>
                <div class="form-group">
                    <textarea name="notes" class="form-control" rows="3" 
                              placeholder="Additional notes about this patient">{{ patient.notes if patient else '' }}</textarea>
                </div>
            </div>
            
            <div class="form-actions">
                <a href="{{ url_for('patients') }}" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-primary">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/>
                    </svg>
                    {% if patient %}Save Changes{% else %}Add Patient{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
